p8105_hw2_es3866
================
2024-09-27

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(dplyr)
```

Problem 1: \## Use relative path to upload the datasets

``` r
pols_df = read_csv(file = "./fivethirtyeight_datasets/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_df = janitor::clean_names(pols_df)
```

## Clean the data in pols-month.csv.

Use separate() to break up the variable mon into integer variables year,
month, and day.

``` r
pols_df <- pols_df %>%
  separate(mon, c("year", "month", "day"))
```

Replace month number with month name.

``` r
pols_df <- pols_df %>%
  mutate(
    month = as.integer(.data$month),
    month = month.name[month]) %>%
  mutate(year = as.integer(year))
```

Create a president variable taking values gop and dem. The pivot
function automatically gets rid of prez_gop and prez_dem.

``` r
pols_df <- pols_df %>%
    pivot_longer(
      cols = c(prez_gop, prez_dem),
      names_to = "president",
      values_to = "party"
  )
```

Remove the day variable.

``` r
pols_df <- pols_df %>%
  select(-day)
```

## Clean the data in snp.csv

``` r
snp_df = read_csv(file = "./fivethirtyeight_datasets/snp.csv")
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df = janitor::clean_names(snp_df)
```

Break up the data variables into day, month, and year

``` r
snp_df <- snp_df %>%
  separate(date, c("month", "day", "year"))
```

For consistency across datasets, arrange according to year and month,
and organize so that year and month are the leading columns.

``` r
snp_df <- snp_df %>%  
  mutate(
    year = as.integer(year),
    year = ifelse(year < 40, 2000 + year, 1900 + year)) %>%
  mutate(
    month = as.integer(month),
    month = month.name[month]) %>%
  select(year, month, everything())
```

Tidy the unemployment data so that it can be merged with the previous
datasets. This process will involve switching from “wide” to “long”
format; ensuring that key variables have the same name; and ensuring
that key variables take the same values.

``` r
unemployment_df = read_csv(file = "./fivethirtyeight_datasets/unemployment.csv")
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df = janitor::clean_names(unemployment_df)
```

``` r
unemployment_df <- unemployment_df %>%
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "percentage"
  )
```

``` r
unemployment_df <- unemployment_df %>%
  mutate(month = month.name[match(tolower(month), tolower(month.abb))])
```

``` r
unemployment_df <- unemployment_df %>%
  mutate(
    year = as.integer(year)
  )
```

Now, merge the data sets! Join the datasets by merging snp into pols,
and merging unemployment into the result.

``` r
snp_pols_df <- snp_df %>%
  left_join(pols_df, by = c("year", "month"))
```

``` r
merged_df <- snp_pols_df %>%
  left_join(unemployment_df, by = c("year", "month"))
```

## Write a short paragraph about these datasets. Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).

The file “pols-month” contains 822 observations related to the number of
national politicians who are democratic or republican (senators,
representatives, govenors, president) at any given time. The snp dataset
contains 787 observations related to the S&P including the date and the
closing values of the S&P stock index on the associated date. The
unemployment dataset contains 68 observations including the year and the
percentage of unemployment in the month of the associated year.

The merged dataset contains data from the years 1950-2015 and aligns the
political state (republican vs democrat) at a given time to the S&P
index closing values and unemployment data. It appears that the
unemplyment rates increase when there is a republican president.
Overall, S&P performance has increased over time.

Problem 2:

``` r
library(readxl) 
mr_trash <- read_excel("./202409 Trash Wheel Collection Data.xlsx",
                       sheet = 1)  %>%
                       slice(1:(n() - 1)) %>%
  mutate(wheel = "mr_trash",
         Year = as.integer(Year))
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
professor_trash <- read_excel("./202409 Trash Wheel Collection Data.xlsx",
                              sheet = 2)  %>%
                              slice(1:(n() - 1)) %>%
  mutate(wheel = "professor_trash",
         Year = as.integer(Year))

gwynnda_trash <- read_excel("./202409 Trash Wheel Collection Data.xlsx",
                            sheet = 4)  %>%
                            slice(1:(n() - 1)) %>%
  mutate(wheel = "gwynnda_trash",
         Year = as.integer(Year))

# Combine them into one tidy dataset
trashwheel_df <- bind_rows(mr_trash, professor_trash, gwynnda_trash)

trashwheel_df = janitor::clean_names(trashwheel_df)
```
